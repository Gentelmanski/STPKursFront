<h2 mat-dialog-title>–°–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</h2>
    <mat-dialog-content>
      <form [formGroup]="eventForm">
        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</mat-label>
            <input matInput formControlName="title" required>
            @if (eventForm.get('title')?.hasError('required')) {
              <mat-error>–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>–¢–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</mat-label>
            <mat-select formControlName="type" required>
              <mat-option value="concert">üéµ –ö–æ–Ω—Ü–µ—Ä—Ç</mat-option>
              <mat-option value="exhibition">üñº –í—ã—Å—Ç–∞–≤–∫–∞</mat-option>
              <mat-option value="meetup">üë• –í—Å—Ç—Ä–µ—á–∞</mat-option>
              <mat-option value="workshop">üîß –ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å</mat-option>
              <mat-option value="sport">‚öΩ –°–ø–æ—Ä—Ç</mat-option>
              <mat-option value="festival">üéâ –§–µ—Å—Ç–∏–≤–∞–ª—å</mat-option>
              <mat-option value="other">üìå –î—Ä—É–≥–æ–µ</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="half-width">
            <mat-label>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="event_date" required>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>–û–ø–∏—Å–∞–Ω–∏–µ</mat-label>
            <textarea matInput formControlName="description" rows="4" required></textarea>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>–ú–∞–∫—Å. —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</mat-label>
            <input matInput type="number" formControlName="max_participants" min="1">
          </mat-form-field>

          <mat-form-field appearance="outline" class="half-width">
            <mat-label>–¶–µ–Ω–∞ (‚ÇΩ)</mat-label>
            <input matInput type="number" formControlName="price" min="0" step="0.01">
          </mat-form-field>
        </div>

        <!-- –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –∞–¥—Ä–µ—Å–∞ -->
        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>–ê–¥—Ä–µ—Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</mat-label>
            <input matInput 
                  [formControl]="addressControl" 
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–µ"
                  id="address-input"> <!-- –î–æ–±–∞–≤–ª–µ–Ω id -->
            <button mat-icon-button matSuffix (click)="geocodeAddress()" [disabled]="!addressControl.value">
              <mat-icon>search</mat-icon>
            </button>
            <mat-hint>–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –ø–æ–∏—Å–∫</mat-hint>
          </mat-form-field>
        </div>

        <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –∫–Ω–æ–ø–∫–∞ —Ä—É—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ -->
        <div class="form-row" *ngIf="selectedLocation">
          <div class="location-info">
            <p><strong>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:</strong> {{selectedLocation.lat.toFixed(6)}}, {{selectedLocation.lng.toFixed(6)}}</p>
            <p><strong>–ê–¥—Ä–µ—Å:</strong> {{selectedLocation.address}}</p>
            <!-- <button mat-button color="primary" (click)="openMapForSelection()">
              <mat-icon>place</mat-icon>
              –í—ã–±—Ä–∞—Ç—å —Ç–æ—á–∫—É –Ω–∞ –∫–∞—Ä—Ç–µ –≤—Ä—É—á–Ω—É—é
            </button> -->
          </div>
        </div>

        <!-- –ü–æ–ª–µ –¥–ª—è —Ç–µ–≥–æ–≤ -->
        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</mat-label>
            <input matInput formControlName="tags" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –º—É–∑—ã–∫–∞, –≤–µ—á–µ—Ä, –≤—Å—Ç—Ä–µ—á–∞">
          </mat-form-field>
        </div>
      </form>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
      <button mat-button (click)="onCancel()">–û—Ç–º–µ–Ω–∞</button>
      <button mat-raised-button color="primary" 
              (click)="onSubmit()"
              [disabled]="!eventForm.valid || !selectedLocation">
        –°–æ–∑–¥–∞—Ç—å
      </button>
    </mat-dialog-actions>